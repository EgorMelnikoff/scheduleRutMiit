Index: app/src/main/java/com/egormelnikoff/schedulerutmiit/Application.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.egormelnikoff.schedulerutmiit\n\nimport android.app.Application\nimport androidx.hilt.work.HiltWorkerFactory\nimport androidx.work.Configuration\nimport com.egormelnikoff.schedulerutmiit.app.widget.WidgetDataUpdater\nimport com.egormelnikoff.schedulerutmiit.app.work.WorkScheduler\nimport com.egormelnikoff.schedulerutmiit.data.datasource.local.database.NamedScheduleDao\nimport com.egormelnikoff.schedulerutmiit.data.datasource.local.preferences.shared_prefs.SharedPreferencesManager\nimport dagger.hilt.android.HiltAndroidApp\nimport kotlinx.coroutines.CoroutineScope\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.SupervisorJob\nimport kotlinx.coroutines.launch\nimport javax.inject.Inject\n\n@HiltAndroidApp\nclass ScheduleApplication : Application(), Configuration.Provider {\n    @Inject\n    lateinit var workerFactory: HiltWorkerFactory\n\n    @Inject\n    lateinit var namedScheduleDao: NamedScheduleDao\n\n    @Inject\n    lateinit var sharedPreferencesManager: SharedPreferencesManager\n\n    @Inject\n    lateinit var workScheduler: WorkScheduler\n\n\n    override val workManagerConfiguration: Configuration\n        get() = Configuration.Builder()\n            .setWorkerFactory(workerFactory)\n            .build()\n\n    private val applicationScope = CoroutineScope(SupervisorJob() + Dispatchers.Main)\n\n    override fun onCreate() {\n        super.onCreate()\n        schedulePeriodicDataRefresh()\n    }\n\n    fun schedulePeriodicDataRefresh() {\n        val isUpdateWidgetsWorkScheduled = sharedPreferencesManager.getBooleanPreference(\n            name = \"update_widgets_scheduled\",\n            initialValue = false\n        )\n\n        val isUpdateScheduleWorkScheduled = sharedPreferencesManager.getBooleanPreference(\n            name = \"update_schedule_scheduled\",\n            initialValue = false\n        )\n\n        applicationScope.launch {\n            if (!isUpdateWidgetsWorkScheduled) {\n                workScheduler.startPeriodicWidgetUpdating()\n            }\n            if (!isUpdateScheduleWorkScheduled) {\n                val defaultNamedScheduleEntity = namedScheduleDao.getDefaultNamedScheduleEntity()\n                defaultNamedScheduleEntity?.let {\n                    workScheduler.startPeriodicScheduleUpdating()\n                }\n            }\n        }\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/egormelnikoff/schedulerutmiit/Application.kt b/app/src/main/java/com/egormelnikoff/schedulerutmiit/Application.kt
--- a/app/src/main/java/com/egormelnikoff/schedulerutmiit/Application.kt	(revision f7f63fb402759d504ec71f529a0109351cbe157c)
+++ b/app/src/main/java/com/egormelnikoff/schedulerutmiit/Application.kt	(date 1761237928185)
@@ -3,7 +3,6 @@
 import android.app.Application
 import androidx.hilt.work.HiltWorkerFactory
 import androidx.work.Configuration
-import com.egormelnikoff.schedulerutmiit.app.widget.WidgetDataUpdater
 import com.egormelnikoff.schedulerutmiit.app.work.WorkScheduler
 import com.egormelnikoff.schedulerutmiit.data.datasource.local.database.NamedScheduleDao
 import com.egormelnikoff.schedulerutmiit.data.datasource.local.preferences.shared_prefs.SharedPreferencesManager
